pkgname=lfm-git
_pkgname=lfm
pkgver=373.b25b9e4
pkgrel=1
pkgdesc="file manager"
url="https://github.com/kmarius/lfm"
license=('')
arch=('x86_64')
depends=('luajit' 'libev' 'lua51-filesystem')
makedepends=('cmake' 'clang')
source=(git+https://github.com/kmarius/lfm)
conflicts=()
md5sums=('SKIP')

pkgver() {
	cd "${_pkgname}"
	echo `git rev-list --count master`.`git rev-parse --short master`
}

prepare() {
	:
}

build() {
	cd "${_pkgname}"
	cmake -Bbuild -DCMAKE_INSTALL_PREFIX="/usr" -DCMAKE_BUILD_TYPE=Release
	cmake --build build
}

package() {
	cd "${_pkgname}"
	DESTDIR="${pkgdir}" cmake --build build --target install
}
